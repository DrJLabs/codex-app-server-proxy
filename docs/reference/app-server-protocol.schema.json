{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Codex App Server JSON-RPC Schema Bundle",
  "cliVersion": "0.92.0",
  "definitions": {
    "InitializeParams": {
      "type": "object",
      "properties": {
        "clientInfo": {
          "$ref": "#/definitions/ClientInfo"
        },
        "capabilities": {
          "anyOf": [
            {
              "$ref": "#/definitions/Record<string,unknown>"
            },
            {
              "type": "null"
            }
          ]
        },
        "protocolVersion": {
          "type": "string"
        }
      },
      "required": [
        "clientInfo"
      ],
      "$schema": "http://json-schema.org/draft-07/schema#"
    },
    "ClientInfo": {
      "type": "object",
      "additionalProperties": {},
      "properties": {
        "name": {
          "type": "string"
        },
        "version": {
          "type": "string"
        },
        "title": {
          "type": [
            "null",
            "string"
          ]
        }
      },
      "required": [
        "name",
        "version"
      ]
    },
    "Record<string,unknown>": {
      "type": "object"
    },
    "ThreadStartParams": {
      "type": "object",
      "additionalProperties": {},
      "properties": {
        "model": {
          "type": [
            "null",
            "string"
          ]
        },
        "modelProvider": {
          "type": [
            "null",
            "string"
          ]
        },
        "profile": {
          "type": [
            "null",
            "string"
          ]
        },
        "cwd": {
          "type": [
            "null",
            "string"
          ]
        },
        "approvalPolicy": {
          "anyOf": [
            {
              "enum": [
                "never",
                "on-failure",
                "on-request",
                "untrusted"
              ],
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        },
        "sandbox": {
          "anyOf": [
            {
              "enum": [
                "danger-full-access",
                "read-only",
                "workspace-write"
              ],
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        },
        "config": {
          "anyOf": [
            {
              "$ref": "#/definitions/Record<string,unknown>"
            },
            {
              "type": "null"
            }
          ]
        },
        "dynamicTools": {
          "anyOf": [
            {
              "type": "array",
              "items": {}
            },
            {
              "type": "null"
            }
          ]
        },
        "baseInstructions": {
          "type": [
            "null",
            "string"
          ]
        },
        "developerInstructions": {
          "type": [
            "null",
            "string"
          ]
        },
        "experimentalRawEvents": {
          "type": [
            "null",
            "boolean"
          ]
        },
        "ephemeral": {
          "type": [
            "null",
            "boolean"
          ]
        },
        "personality": {
          "type": [
            "null",
            "string"
          ]
        }
      },
      "$schema": "http://json-schema.org/draft-07/schema#"
    },
    "AddConversationListenerParams": {
      "type": "object",
      "additionalProperties": {},
      "properties": {
        "conversationId": {
          "type": "string"
        },
        "experimentalRawEvents": {
          "type": "boolean"
        }
      },
      "required": [
        "conversationId"
      ],
      "$schema": "http://json-schema.org/draft-07/schema#"
    },
    "RemoveConversationListenerParams": {
      "type": "object",
      "additionalProperties": {},
      "properties": {
        "subscriptionId": {
          "type": "string"
        }
      },
      "required": [
        "subscriptionId"
      ],
      "$schema": "http://json-schema.org/draft-07/schema#"
    },
    "TurnStartParams": {
      "type": "object",
      "additionalProperties": {},
      "properties": {
        "threadId": {
          "type": "string"
        },
        "input": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/UserInput"
          }
        },
        "approvalPolicy": {
          "anyOf": [
            {
              "enum": [
                "never",
                "on-failure",
                "on-request",
                "untrusted"
              ],
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        },
        "sandboxPolicy": {},
        "cwd": {
          "type": [
            "null",
            "string"
          ]
        },
        "model": {
          "type": [
            "null",
            "string"
          ]
        },
        "effort": {
          "anyOf": [
            {
              "enum": [
                "high",
                "low",
                "medium",
                "xhigh"
              ],
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        },
        "summary": {
          "anyOf": [
            {
              "enum": [
                "auto",
                "concise",
                "detailed",
                "none"
              ],
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        },
        "outputSchema": {}
      },
      "required": [
        "input",
        "threadId"
      ],
      "$schema": "http://json-schema.org/draft-07/schema#"
    },
    "UserInput": {
      "anyOf": [
        {
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "const": "text"
            },
            "text": {
              "type": "string"
            },
            "text_elements": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "byteRange": {}
                },
                "required": [
                  "byteRange"
                ]
              }
            }
          },
          "required": [
            "text",
            "type"
          ]
        },
        {
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "const": "image"
            },
            "url": {
              "type": "string"
            }
          },
          "required": [
            "type",
            "url"
          ]
        },
        {
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "const": "localImage"
            },
            "path": {
              "type": "string"
            }
          },
          "required": [
            "path",
            "type"
          ]
        },
        {
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "const": "skill"
            },
            "name": {
              "type": "string"
            },
            "path": {
              "type": "string"
            }
          },
          "required": [
            "name",
            "path",
            "type"
          ]
        }
      ]
    },
    "AgentMessageDeltaParams": {
      "type": "object",
      "additionalProperties": {},
      "properties": {
        "delta": {
          "$ref": "#/definitions/AgentMessageDelta"
        },
        "thread_id": {
          "type": "string"
        },
        "threadId": {
          "type": "string"
        },
        "request_id": {
          "type": "string"
        },
        "requestId": {
          "type": "string"
        },
        "conversation": {
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "id": {
                  "type": [
                    "null",
                    "string"
                  ]
                }
              }
            },
            {
              "type": "null"
            }
          ]
        },
        "context": {
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "thread_id": {
                  "type": [
                    "null",
                    "string"
                  ]
                },
                "threadId": {
                  "type": [
                    "null",
                    "string"
                  ]
                },
                "request_id": {
                  "type": [
                    "null",
                    "string"
                  ]
                },
                "requestId": {
                  "type": [
                    "null",
                    "string"
                  ]
                }
              }
            },
            {
              "type": "null"
            }
          ]
        }
      },
      "required": [
        "delta"
      ],
      "$schema": "http://json-schema.org/draft-07/schema#"
    },
    "AgentMessageDelta": {
      "anyOf": [
        {
          "allOf": [
            {
              "type": "object",
              "additionalProperties": {},
              "properties": {
                "role": {
                  "type": "string"
                },
                "content": {
                  "anyOf": [
                    {
                      "$ref": "#/definitions/AgentContentPayload"
                    },
                    {
                      "type": "array",
                      "items": {
                        "$ref": "#/definitions/AgentContentPayload"
                      }
                    },
                    {
                      "type": [
                        "null",
                        "string"
                      ]
                    }
                  ]
                },
                "text": {
                  "type": [
                    "null",
                    "string"
                  ]
                },
                "metadata": {
                  "anyOf": [
                    {
                      "$ref": "#/definitions/Record<string,unknown>"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "tool_calls": {
                  "anyOf": [
                    {
                      "type": "array",
                      "items": {
                        "$ref": "#/definitions/ToolCallDelta"
                      }
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "toolCalls": {
                  "anyOf": [
                    {
                      "type": "array",
                      "items": {
                        "$ref": "#/definitions/ToolCallDelta"
                      }
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "parallel_tool_calls": {
                  "type": "boolean"
                },
                "parallelToolCalls": {
                  "type": "boolean"
                }
              }
            },
            {
              "$ref": "#/definitions/Record<string,unknown>"
            }
          ]
        },
        {
          "type": "string"
        }
      ]
    },
    "AgentContentPayload": {
      "type": "object",
      "additionalProperties": {},
      "properties": {
        "text": {
          "type": "string"
        },
        "content": {
          "type": "string"
        },
        "type": {
          "type": "string"
        }
      }
    },
    "ToolCallDelta": {
      "type": "object",
      "additionalProperties": {},
      "properties": {
        "index": {
          "type": "number"
        },
        "id": {
          "type": "string"
        },
        "tool_call_id": {
          "type": "string"
        },
        "toolCallId": {
          "type": "string"
        },
        "type": {
          "type": "string"
        },
        "function": {
          "$ref": "#/definitions/ToolCallFunctionDelta"
        },
        "parallel_tool_calls": {
          "type": "boolean"
        },
        "parallelToolCalls": {
          "type": "boolean"
        }
      }
    },
    "ToolCallFunctionDelta": {
      "type": "object",
      "additionalProperties": {},
      "properties": {
        "name": {
          "type": "string"
        },
        "arguments": {
          "type": "string"
        },
        "arguments_chunk": {
          "type": "string"
        },
        "argumentsChunk": {
          "type": "string"
        }
      }
    },
    "AgentMessageParams": {
      "type": "object",
      "additionalProperties": {},
      "properties": {
        "message": {
          "$ref": "#/definitions/AssistantMessage"
        },
        "parallel_tool_calls": {
          "type": "boolean"
        },
        "parallelToolCalls": {
          "type": "boolean"
        },
        "thread_id": {
          "type": "string"
        },
        "threadId": {
          "type": "string"
        },
        "request_id": {
          "type": "string"
        },
        "requestId": {
          "type": "string"
        },
        "conversation": {
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "id": {
                  "type": [
                    "null",
                    "string"
                  ]
                }
              }
            },
            {
              "type": "null"
            }
          ]
        },
        "context": {
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "thread_id": {
                  "type": [
                    "null",
                    "string"
                  ]
                },
                "threadId": {
                  "type": [
                    "null",
                    "string"
                  ]
                },
                "request_id": {
                  "type": [
                    "null",
                    "string"
                  ]
                },
                "requestId": {
                  "type": [
                    "null",
                    "string"
                  ]
                }
              }
            },
            {
              "type": "null"
            }
          ]
        }
      },
      "required": [
        "message"
      ],
      "$schema": "http://json-schema.org/draft-07/schema#"
    },
    "AssistantMessage": {
      "type": "object",
      "additionalProperties": {},
      "properties": {
        "role": {
          "type": "string"
        },
        "content": {
          "anyOf": [
            {
              "$ref": "#/definitions/AgentContentPayload"
            },
            {
              "type": "array",
              "items": {
                "$ref": "#/definitions/AgentContentPayload"
              }
            },
            {
              "type": [
                "null",
                "string"
              ]
            }
          ]
        },
        "tool_calls": {
          "anyOf": [
            {
              "type": "array",
              "items": {
                "$ref": "#/definitions/ToolCall"
              }
            },
            {
              "type": "null"
            }
          ]
        },
        "toolCalls": {
          "anyOf": [
            {
              "type": "array",
              "items": {
                "$ref": "#/definitions/ToolCall"
              }
            },
            {
              "type": "null"
            }
          ]
        },
        "function_call": {
          "anyOf": [
            {
              "$ref": "#/definitions/FunctionCall"
            },
            {
              "type": "null"
            }
          ]
        },
        "functionCall": {
          "anyOf": [
            {
              "$ref": "#/definitions/FunctionCall"
            },
            {
              "type": "null"
            }
          ]
        },
        "metadata": {
          "anyOf": [
            {
              "$ref": "#/definitions/Record<string,unknown>"
            },
            {
              "type": "null"
            }
          ]
        }
      },
      "required": [
        "role"
      ]
    },
    "ToolCall": {
      "type": "object",
      "additionalProperties": {},
      "properties": {
        "index": {
          "type": "number"
        },
        "id": {
          "type": "string"
        },
        "type": {
          "type": "string"
        },
        "function": {
          "$ref": "#/definitions/ToolCallFunction"
        }
      }
    },
    "ToolCallFunction": {
      "type": "object",
      "additionalProperties": {},
      "properties": {
        "name": {
          "type": "string"
        },
        "arguments": {
          "type": "string"
        }
      }
    },
    "FunctionCall": {
      "type": "object",
      "additionalProperties": {},
      "properties": {
        "name": {
          "type": "string"
        },
        "arguments": {
          "type": "string"
        }
      }
    },
    "TokenCountParams": {
      "type": "object",
      "additionalProperties": {},
      "properties": {
        "prompt_tokens": {
          "type": "number"
        },
        "completion_tokens": {
          "type": "number"
        },
        "total_tokens": {
          "type": "number"
        },
        "finish_reason": {
          "type": "string"
        },
        "reason": {
          "type": "string"
        },
        "token_limit_reached": {
          "type": "boolean"
        },
        "thread_id": {
          "type": "string"
        },
        "threadId": {
          "type": "string"
        },
        "request_id": {
          "type": "string"
        },
        "requestId": {
          "type": "string"
        },
        "conversation": {
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "id": {
                  "type": [
                    "null",
                    "string"
                  ]
                }
              }
            },
            {
              "type": "null"
            }
          ]
        },
        "context": {
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "thread_id": {
                  "type": [
                    "null",
                    "string"
                  ]
                },
                "threadId": {
                  "type": [
                    "null",
                    "string"
                  ]
                },
                "request_id": {
                  "type": [
                    "null",
                    "string"
                  ]
                },
                "requestId": {
                  "type": [
                    "null",
                    "string"
                  ]
                }
              }
            },
            {
              "type": "null"
            }
          ]
        }
      },
      "$schema": "http://json-schema.org/draft-07/schema#"
    },
    "RequestTimeoutParams": {
      "type": "object",
      "additionalProperties": {},
      "properties": {
        "reason": {
          "type": "string"
        },
        "thread_id": {
          "type": "string"
        },
        "threadId": {
          "type": "string"
        },
        "request_id": {
          "type": "string"
        },
        "requestId": {
          "type": "string"
        },
        "conversation": {
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "id": {
                  "type": [
                    "null",
                    "string"
                  ]
                }
              }
            },
            {
              "type": "null"
            }
          ]
        },
        "context": {
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "thread_id": {
                  "type": [
                    "null",
                    "string"
                  ]
                },
                "threadId": {
                  "type": [
                    "null",
                    "string"
                  ]
                },
                "request_id": {
                  "type": [
                    "null",
                    "string"
                  ]
                },
                "requestId": {
                  "type": [
                    "null",
                    "string"
                  ]
                }
              }
            },
            {
              "type": "null"
            }
          ]
        }
      },
      "$schema": "http://json-schema.org/draft-07/schema#"
    },
    "JsonRpcErrorResponse": {
      "type": "object",
      "properties": {
        "id": {
          "$ref": "#/definitions/JsonRpcId"
        },
        "error": {
          "$ref": "#/definitions/JsonRpcErrorObject"
        },
        "jsonrpc": {
          "type": "string",
          "const": "2.0"
        }
      },
      "required": [
        "error",
        "id",
        "jsonrpc"
      ],
      "$schema": "http://json-schema.org/draft-07/schema#"
    },
    "JsonRpcId": {
      "type": [
        "string",
        "number"
      ]
    },
    "JsonRpcErrorObject": {
      "type": "object",
      "properties": {
        "code": {
          "type": [
            "string",
            "number"
          ]
        },
        "message": {
          "type": "string"
        },
        "data": {}
      },
      "required": [
        "code",
        "message"
      ]
    },
    "JsonRpcSuccessResponse": {
      "type": "object",
      "properties": {
        "id": {
          "$ref": "#/definitions/JsonRpcId"
        },
        "result": {
          "$ref": "#/definitions/Result"
        },
        "jsonrpc": {
          "type": "string",
          "const": "2.0"
        }
      },
      "required": [
        "id",
        "jsonrpc",
        "result"
      ],
      "$schema": "http://json-schema.org/draft-07/schema#"
    },
    "Result": {
      "type": "object"
    }
  }
}
